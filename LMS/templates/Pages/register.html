{% extends "Pages/base.html" %} 
{% block title %}Register | SkyLearner{%endblock %} 
{% block content%}
<main class="main-content main-content-bg mt-0">
  <div
    class="page-header align-items-start min-height-300 m-3 border-radius-xl bg-gray-200"
    style="
      background-image: url('https://images.unsplash.com/photo-1545569341-9eb8b30979d9?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
      background-size: cover;
      background-position: center;
    ">
    <span class="mask bg-gradient-dark opacity-4"></span>
  </div>
  <div class="container">
    <div class="row mt-lg-n12 mt-md-n12 mt-n11 justify-content-center">
      <div class="col-xl-4 col-lg-5 col-md-7 mx-auto">
        <div class="card mt-8">
          <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
            <div
              class="bg-gradient-primary shadow-primary border-radius-lg py-3 pe-1 text-center py-4">
              <h4 class="font-weight-bolder text-white mt-1">Join us today</h4>
              <p class="mb-1 text-white text-sm">
                Enter your email and password to register
              </p>
            </div>
          </div>
          <span class="mb-0 text-muted" style="position: fixed; top: 2px; right: 0; z-index: 1000; margin-top: 10px; margin-right: 10px;">
            {% if 'registered=True' in request.get_full_path %}
                    <ul class="messages" style="list-style-type: none; padding: 0; margin: 0;">
                            <li>
                                <div class="alert alert-success text-white" role="alert"> 
                                    {{ success_msg }}
                                </div>
                            </li>
                    </ul>
                
                    <script type="text/javascript">
                        setTimeout(function() {
                            window.location.href = "{% url 'login' %}";
                        }, 5000);
                    </script>
                {% endif %}
        </span>
        
          <div class="card-body pb-3">
            <form method="post">
              {% csrf_token %} 
                         
              <div class="input-group input-group-outline mb-3">         
                {{ form.username }}
                <small class="text-muted text-primary">{{ form.username.errors }}</small>
              </div>
              <div class="input-group input-group-outline mb-3">
                {{ form.email }}
                <div class="text-muted text-primary">{{ form.email.errors }}</div>
              </div>
              <div class="input-group input-group-outline mb-3">
                {{ form.password1 }}
                <small class="text-muted text-primary">{{ form.password1.errors }}</small>
              </div>
              <div class="input-group input-group-outline mb-3">
                {{ form.password2 }}
                <small class="text-muted text-primary">{{ form.password2.errors }}</small>
              </div>
              <div id="password-conditions">
                <h4>Password Conditions:</h4>
                <ul>
                  <li id="capital-letter">At least one capital letter</li>
                  <li id="special-character">At least one special character (@, #, $, %, ^, &, *, or _)</li>
                  <li id="number">At least one number</li>
                  <li id="length">At least 8 characters long</li>
                </ul>
              </div>
              
              <div id="password-feedback"></div>
              <div class="form-check text-left">
                <input
                  class="form-check-input bg-dark border-dark"
                  type="checkbox"
                  value
                  id="flexCheckDefault"
                  checked />
                <label class="form-check-label" for="flexCheckDefault">
                  I agree the
                  <a
                    href=""
                    class="text-dark font-weight-bolder"
                    >Terms and Conditions</a
                  >
                </label>
              </div>
              <div class="form-check text-left">
                
                  
                <label class="form-check-label" for="flexCheckDefault">
                  {{ form.role_choice }}
                                  
                </label>
              </div>
              
                                   
            
              <div class="text-center">
                <input type="submit" value="Register"
                  class="btn bg-gradient-primary w-100 mt-2 mb-0" id="register-button">
                  
              </div>
              <div class="divider d-flex align-items-center my-4">
                <p class="text-center fw-bold mx-3 mb-0 text-muted">OR</p>
              </div>
    
              <a class="btn btn-primary btn-lg btn-block" style="background-color: #DB4437" 
              href="{% url 'social:begin' 'google-oauth2' %}">
                <i class="fab fa-google me-2"></i>Continue with Google
              </a>
            </form>
          </div>
          <div class="card-footer text-center pt-0 px-sm-4 px-1">
            <p class="mb-4 mx-auto">
              Already have an account?
              <a
                href="{% url 'login' %}"
                class="text-primary text-gradient font-weight-bold"
                >Sign in</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
<script>
  
    document.addEventListener("DOMContentLoaded", function() {
        const checkbox = document.getElementById("flexCheckDefault");
        const registerButton = document.getElementById("register-button");
    
        // Add an event listener to the checkbox to enable/disable the button
        checkbox.addEventListener("change", function() {
            if (checkbox.checked) {
                registerButton.disabled = false;  // Enable the button
            } else {
                registerButton.disabled = true;   // Disable the button
            }
        });
    });
    </script>
    
  </script>
  
{% endblock %}
